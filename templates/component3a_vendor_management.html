{% extends "base.html" %}
{% block content %}
<style>
/* Default: text left */
.table-wrapper td,
.table-wrapper th {
    text-align: left;
}

/* Right-align numeric columns */
.table-wrapper td[data-col="Total_POs"],
.table-wrapper td[data-col="On_Time_POs"],
.table-wrapper td[data-col="Delayed_POs"],
.table-wrapper td[data-col="On_Time %"],
.table-wrapper td[data-col="Vendor Count"] {
    text-align: right;
}
</style>


<h2 style="color: white;">KPI Name:  {{ label }} (Data Period: Apr - Nov) </h2>
<h3 style="color: white;">Alignment of KPI with Business Objective: Increase Warehouses & Reduce SCM TAT to 2-4 days (PAN India)</h3>

<!-- <h4>95% On-Time Delivery Rate from Vendors</h4> -->

<!-- <hr> -->

<!-- KPI SUMMARY -->
<!-- <div class="kpi-container">
  {% for key, value in summary.items() %}
    <div class="kpi-card">
      <div class="kpi-value">{{ value }}</div>
      <div class="kpi-label">
        {{ key.replace('_',' ').title() }}
      </div>
    </div>
  {% endfor %}
</div> -->

<!-- <hr> -->
<!-- CHART -->
{% if charts and charts.chart_0 %}
  <div class="chart-grid">
    <div class="chart-card">
      <h3>Number of Vendors by PO Completion Rate</h3>
      {{ charts.chart_0 | safe }}
    </div>
  </div>
{% endif %}
<h2 style="color: white;">
Observation: Out of 384 vendors, 82 achieved a greater than 95% PO completion rate. 
30 vendors recorded the completion rate of 85–94% range, 
44 vendors within the 75–84% range, 
and 228 vendors recorded a PO completion rate below 74%.
</h2>

<div style="
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 20px;
">

    <h2 style="color:white; margin: 0;">KPI data in Table</h2>

    <div>
        <a href="javascript:history.back()" 
           style="
               background:#ffffff;
               color:#003d99;
               padding:8px 16px;
               border-radius:8px;
               font-weight:600;
               text-decoration:none;
               margin-right:10px;
               box-shadow:0 2px 5px rgba(0,0,0,0.15);
           ">
           ← Back
        </a>

        <a href="/download/{{ kpi_id }}" 
           style="
               background:#ffffff;
               color:#003d99;
               padding:8px 16px;
               border-radius:8px;
               font-weight:600;
               text-decoration:none;
               box-shadow:0 2px 5px rgba(0,0,0,0.15);
           ">
            ⬇ Download Excel
        </a>
    </div>

</div>
<hr>
<!-- TABLE -->
{% if table_html %}
  <div class="table-wrapper">
    {{ table_html | safe | replace('Total_POs', 'Total POs') | replace('On_Time_POs', 'On Time POs') | replace('Late_POs', 'Late POs') | replace('On_Time_Pct', 'On Time %') }}
  </div>
{% endif %}

<a href="/departments">← Back</a>

{% endblock %}
