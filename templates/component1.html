{% extends "base.html" %}
{% block content %}
<style>
  <style>
/* Default: text left */
.table-wrapper td,
.table-wrapper th {
    text-align: left;
}

/* Right-align numeric columns */
.table-wrapper td[data-col="Total Qty"],
.table-wrapper td[data-col="Shipped Qty"],
.table-wrapper td[data-col="Received Qty"],
.table-wrapper td[data-col="In Transit Qty"] {
    text-align: right;
}
</style>

</style>

<h2 style="color: white;">KPI Name: {{ label }} (Data Period : Apr-Nov'25)</h2>
<h3 style="color :white">Alignment of KPI with Business Objective: Link Production/Manufacturing to Sales in ERP</h2>
<!-- <h3>% of Transfers Completed on Schedule</h3> -->

<!-- KPI SUMMARY
<div class="kpi-container">
  {% for key, value in summary.items() %}
    <div class="kpi-card">
      <div class="kpi-value">{{ value }}</div>
      <div class="kpi-label">
        {{ key.replace('_',' ').title() }}
      </div>
    </div>
  {% endfor %}
</div>

<hr> -->

<!-- CHARTS -->
{% if charts %}
  <div class="chart-grid">

    <!-- Chart 0 -->
    {% if charts.chart_0 %}
      <div class="chart-card">
        <h3>Transfer Order Status</h3>
        {{ charts.chart_0 | safe }}
      </div>
    {% endif %}

    <!-- Chart 1 -->
    {% if charts.chart_1 %}
      <div class="chart-card">
        <h3>Completion Ratio</h3>
        {{ charts.chart_1 | safe }}
      </div>
    {% endif %}

    <!-- Chart 2 -->
    {% if charts.chart_2 %}
      <div class="chart-card">
        <h3>Month-on-Month Pending Transfers</h3>
        {{ charts.chart_2 | safe }}
      </div>
    {% endif %}

  </div>
{% endif %}
<h2 style="color:white;">Observation: Transfer Order Status - Out of 70 transfer orders, 24.3% are completed, 2.86% are partially shipped, and 72.9% are in transit. 
<br>Month-on-month visualization: the blue bars (In Transit) are the highest. 
The red bars (Completed) fluctuate month to month. 
The green bars (Partially Shipped) are minimal.</h2>
<div style="
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 20px;
">

    <h2 style="color:white; margin: 0;">KPI data in Table</h2>

    <div>
        <a href="javascript:history.back()" 
           style="
               background:#ffffff;
               color:#003d99;
               padding:8px 16px;
               border-radius:8px;
               font-weight:600;
               text-decoration:none;
               margin-right:10px;
               box-shadow:0 2px 5px rgba(0,0,0,0.15);
           ">
           ← Back
        </a>

        <a href="/download/{{ kpi_id }}" 
           style="
               background:#ffffff;
               color:#003d99;
               padding:8px 16px;
               border-radius:8px;
               font-weight:600;
               text-decoration:none;
               box-shadow:0 2px 5px rgba(0,0,0,0.15);
           ">
            ⬇ Download Excel
        </a>
    </div>

</div>

<hr>


<hr>   


<!-- TABLE -->
{% if table_html %}
  <div class="table-wrapper">
    {{ table_html | safe }}
  </div>
{% endif %}

<br>
<a href="/departments">← Back</a>

{% endblock %}
